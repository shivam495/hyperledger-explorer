{"ast":null,"code":"/**\n *    SPDX-License-Identifier: Apache-2.0\n */import React,{Component}from'react';import{withStyles}from'@material-ui/core/styles';import{Row,Col}from'reactstrap';import FontAwesome from'react-fontawesome';import Card from'@material-ui/core/Card';import Avatar from'@material-ui/core/Avatar';import ChartStats from'../Charts/ChartStats';import PeersHealth from'../Lists/PeersHealth';import TimelineStream from'../Lists/TimelineStream';import OrgPieChart from'../Charts/OrgPieChart';import{blockListType,dashStatsType,peerStatusType,transactionByOrgType}from'../types';/* istanbul ignore next */const styles=theme=>{const type=theme.palette.type;const dark=type==='dark';return{background:{backgroundColor:dark?'rgb(36, 32, 54)':'#f0f5f9'},view:{paddingTop:85,paddingLeft:0,width:'80%',marginLeft:'10%',marginRight:'10%'},blocks:{height:175,marginBottom:20,backgroundColor:dark?'#453e68':'#ffffff',boxShadow:dark?'1px 2px 2px rgb(215, 247, 247)':undefined},count:{marginTop:'55%',color:dark?'#ffffff':undefined},statistic:{display:'block',float:'left',height:'100%',width:'25%',textAlign:'center',fontSize:'18pt',color:dark?'#ffffff':'#000000'},vdivide:{'&::after':{borderRight:\"2px \".concat(dark?'rgb(40, 36, 61)':'#dff1fe',\" solid\"),display:'block',height:'45%',bottom:'55%',content:\"' '\",position:'relative'}},avatar:{justifyContent:'center',marginLeft:'60%',marginTop:'65%'},node:{color:dark?'#183a37':'#21295c',backgroundColor:dark?'rgb(104, 247, 235)':'#858aa6'},block:{color:dark?'#1f1a33':'#004d6b',backgroundColor:dark?'rgb(106, 156, 248)':'#b9d6e1'},chaincode:{color:dark?'rgb(121, 83, 109)':'#407b20',backgroundColor:dark?'rgb(247, 205, 234)':'#d0ecda'},transaction:{color:dark?'rgb(216, 142, 4)':'#ffa686',backgroundColor:dark?'rgb(252, 224, 174)':'#ffeed8'},section:{height:335,marginBottom:'2%',color:dark?'#ffffff':undefined,backgroundColor:dark?'#3c3558':undefined},center:{textAlign:'center'}};};export class DashboardView extends Component{constructor(props){super(props);this.setNotifications=blockList=>{const notificationsArr=[];if(blockList!==undefined){for(let i=0;i<3&&blockList&&blockList[i];i+=1){const block=blockList[i];const notify={title:\"Block \".concat(block.blocknum,\" \"),type:'block',time:block.createdt,txcount:block.txcount,datahash:block.datahash,blockhash:block.blockhash,channelName:block.channelname};notificationsArr.push(notify);}}this.setState({notifications:notificationsArr});};this.state={notifications:[],hasDbError:false};}componentWillMount(){const _this$props=this.props,blockList=_this$props.blockList,dashStats=_this$props.dashStats,peerStatus=_this$props.peerStatus,transactionByOrg=_this$props.transactionByOrg,blockActivity=_this$props.blockActivity;if(blockList===undefined||dashStats===undefined||peerStatus===undefined||blockActivity===undefined||transactionByOrg===undefined){this.setState({hasDbError:true});}}componentDidMount(){const blockActivity=this.props.blockActivity;this.setNotifications(blockActivity);}componentWillReceiveProps(){const blockActivity=this.props.blockActivity;this.setNotifications(blockActivity);}render(){const _this$props2=this.props,dashStats=_this$props2.dashStats,peerStatus=_this$props2.peerStatus,blockActivity=_this$props2.blockActivity,transactionByOrg=_this$props2.transactionByOrg;const _this$state=this.state,hasDbError=_this$state.hasDbError,notifications=_this$state.notifications;if(hasDbError){return/*#__PURE__*/React.createElement(\"div\",{style:{height:'100vh',display:'flex',justifyContent:'center',alignItems:'center'}},/*#__PURE__*/React.createElement(\"h1\",null,\"Please verify your network configuration, database configuration and try again\"));}const classes=this.props.classes;return/*#__PURE__*/React.createElement(\"div\",{className:classes.background},/*#__PURE__*/React.createElement(\"div\",{className:classes.view},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,{className:classes.blocks},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide)},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.block)},/*#__PURE__*/React.createElement(FontAwesome,{name:\"cube\"}))),/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(\"h1\",{className:classes.count},dashStats.latestBlock))),\"BLOCKS\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide)},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.transaction)},/*#__PURE__*/React.createElement(FontAwesome,{name:\"list-alt\"}))),/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(\"h1\",{className:classes.count},dashStats.txCount))),\"TRANSACTIONS\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide)},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.node)},/*#__PURE__*/React.createElement(FontAwesome,{name:\"users\"}))),/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(\"h1\",{className:classes.count},dashStats.peerCount))),\"NODES\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.statistic},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.chaincode)},/*#__PURE__*/React.createElement(FontAwesome,{name:\"handshake-o\"}))),/*#__PURE__*/React.createElement(Col,{sm:\"4\"},/*#__PURE__*/React.createElement(\"h1\",{className:classes.count},dashStats.chaincodeCount))),\"CHAINCODES\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:classes.section},/*#__PURE__*/React.createElement(PeersHealth,{peerStatus:peerStatus})),/*#__PURE__*/React.createElement(Card,{className:classes.section},/*#__PURE__*/React.createElement(TimelineStream,{notifications:notifications,blockList:blockActivity}))),/*#__PURE__*/React.createElement(Col,{sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:classes.section},/*#__PURE__*/React.createElement(ChartStats,null)),/*#__PURE__*/React.createElement(Card,{className:\"\".concat(classes.section,\" \").concat(classes.center)},/*#__PURE__*/React.createElement(\"h5\",null,\"Transactions by Organization\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(OrgPieChart,{transactionByOrg:transactionByOrg}))))));}}export default withStyles(styles)(DashboardView);","map":{"version":3,"sources":["/home/shivam/blockchain-explorer/client/src/components/View/DashboardView.js"],"names":["React","Component","withStyles","Row","Col","FontAwesome","Card","Avatar","ChartStats","PeersHealth","TimelineStream","OrgPieChart","blockListType","dashStatsType","peerStatusType","transactionByOrgType","styles","theme","type","palette","dark","background","backgroundColor","view","paddingTop","paddingLeft","width","marginLeft","marginRight","blocks","height","marginBottom","boxShadow","undefined","count","marginTop","color","statistic","display","float","textAlign","fontSize","vdivide","borderRight","bottom","content","position","avatar","justifyContent","node","block","chaincode","transaction","section","center","DashboardView","constructor","props","setNotifications","blockList","notificationsArr","i","notify","title","blocknum","time","createdt","txcount","datahash","blockhash","channelName","channelname","push","setState","notifications","state","hasDbError","componentWillMount","dashStats","peerStatus","transactionByOrg","blockActivity","componentDidMount","componentWillReceiveProps","render","alignItems","classes","latestBlock","txCount","peerCount","chaincodeCount"],"mappings":"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","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Row, Col } from 'reactstrap';\nimport FontAwesome from 'react-fontawesome';\nimport Card from '@material-ui/core/Card';\nimport Avatar from '@material-ui/core/Avatar';\nimport ChartStats from '../Charts/ChartStats';\nimport PeersHealth from '../Lists/PeersHealth';\nimport TimelineStream from '../Lists/TimelineStream';\nimport OrgPieChart from '../Charts/OrgPieChart';\nimport {\n\tblockListType,\n\tdashStatsType,\n\tpeerStatusType,\n\ttransactionByOrgType\n} from '../types';\n\n/* istanbul ignore next */\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tbackground: {\n\t\t\tbackgroundColor: dark ? 'rgb(36, 32, 54)' : '#f0f5f9'\n\t\t},\n\t\tview: {\n\t\t\tpaddingTop: 85,\n\t\t\tpaddingLeft: 0,\n\t\t\twidth: '80%',\n\t\t\tmarginLeft: '10%',\n\t\t\tmarginRight: '10%'\n\t\t},\n\t\tblocks: {\n\t\t\theight: 175,\n\t\t\tmarginBottom: 20,\n\t\t\tbackgroundColor: dark ? '#453e68' : '#ffffff',\n\t\t\tboxShadow: dark ? '1px 2px 2px rgb(215, 247, 247)' : undefined\n\t\t},\n\t\tcount: {\n\t\t\tmarginTop: '55%',\n\t\t\tcolor: dark ? '#ffffff' : undefined\n\t\t},\n\t\tstatistic: {\n\t\t\tdisplay: 'block',\n\t\t\tfloat: 'left',\n\t\t\theight: '100%',\n\t\t\twidth: '25%',\n\t\t\ttextAlign: 'center',\n\t\t\tfontSize: '18pt',\n\t\t\tcolor: dark ? '#ffffff' : '#000000'\n\t\t},\n\t\tvdivide: {\n\t\t\t'&::after': {\n\t\t\t\tborderRight: `2px ${dark ? 'rgb(40, 36, 61)' : '#dff1fe'} solid`,\n\t\t\t\tdisplay: 'block',\n\t\t\t\theight: '45%',\n\t\t\t\tbottom: '55%',\n\t\t\t\tcontent: \"' '\",\n\t\t\t\tposition: 'relative'\n\t\t\t}\n\t\t},\n\t\tavatar: {\n\t\t\tjustifyContent: 'center',\n\t\t\tmarginLeft: '60%',\n\t\t\tmarginTop: '65%'\n\t\t},\n\t\tnode: {\n\t\t\tcolor: dark ? '#183a37' : '#21295c',\n\t\t\tbackgroundColor: dark ? 'rgb(104, 247, 235)' : '#858aa6'\n\t\t},\n\t\tblock: {\n\t\t\tcolor: dark ? '#1f1a33' : '#004d6b',\n\t\t\tbackgroundColor: dark ? 'rgb(106, 156, 248)' : '#b9d6e1'\n\t\t},\n\t\tchaincode: {\n\t\t\tcolor: dark ? 'rgb(121, 83, 109)' : '#407b20',\n\t\t\tbackgroundColor: dark ? 'rgb(247, 205, 234)' : '#d0ecda'\n\t\t},\n\t\ttransaction: {\n\t\t\tcolor: dark ? 'rgb(216, 142, 4)' : '#ffa686',\n\t\t\tbackgroundColor: dark ? 'rgb(252, 224, 174)' : '#ffeed8'\n\t\t},\n\t\tsection: {\n\t\t\theight: 335,\n\t\t\tmarginBottom: '2%',\n\t\t\tcolor: dark ? '#ffffff' : undefined,\n\t\t\tbackgroundColor: dark ? '#3c3558' : undefined\n\t\t},\n\t\tcenter: {\n\t\t\ttextAlign: 'center'\n\t\t}\n\t};\n};\n\nexport class DashboardView extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tnotifications: [],\n\t\t\thasDbError: false\n\t\t};\n\t}\n\n\tcomponentWillMount() {\n\t\tconst {\n\t\t\tblockList,\n\t\t\tdashStats,\n\t\t\tpeerStatus,\n\t\t\ttransactionByOrg,\n\t\t\tblockActivity\n\t\t} = this.props;\n\t\tif (\n\t\t\tblockList === undefined ||\n\t\t\tdashStats === undefined ||\n\t\t\tpeerStatus === undefined ||\n\t\t\tblockActivity === undefined ||\n\t\t\ttransactionByOrg === undefined\n\t\t) {\n\t\t\tthis.setState({ hasDbError: true });\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { blockActivity } = this.props;\n\t\tthis.setNotifications(blockActivity);\n\t}\n\n\tcomponentWillReceiveProps() {\n\t\tconst { blockActivity } = this.props;\n\t\tthis.setNotifications(blockActivity);\n\t}\n\n\tsetNotifications = blockList => {\n\t\tconst notificationsArr = [];\n\t\tif (blockList !== undefined) {\n\t\t\tfor (let i = 0; i < 3 && blockList && blockList[i]; i += 1) {\n\t\t\t\tconst block = blockList[i];\n\t\t\t\tconst notify = {\n\t\t\t\t\ttitle: `Block ${block.blocknum} `,\n\t\t\t\t\ttype: 'block',\n\t\t\t\t\ttime: block.createdt,\n\t\t\t\t\ttxcount: block.txcount,\n\t\t\t\t\tdatahash: block.datahash,\n\t\t\t\t\tblockhash: block.blockhash,\n\t\t\t\t\tchannelName: block.channelname\n\t\t\t\t};\n\t\t\t\tnotificationsArr.push(notify);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ notifications: notificationsArr });\n\t};\n\n\trender() {\n\t\tconst { dashStats, peerStatus, blockActivity, transactionByOrg } = this.props;\n\t\tconst { hasDbError, notifications } = this.state;\n\t\tif (hasDbError) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: '100vh',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<h1>\n\t\t\t\t\t\tPlease verify your network configuration, database configuration and try\n\t\t\t\t\t\tagain\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.background}>\n\t\t\t\t<div className={classes.view}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col sm=\"12\">\n\t\t\t\t\t\t\t<Card className={classes.blocks}>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.block}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"cube\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.latestBlock}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tBLOCKS\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.transaction}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"list-alt\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.txCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tTRANSACTIONS\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.node}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"users\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.peerCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tNODES\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.statistic}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.chaincode}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"handshake-o\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.chaincodeCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tCHAINCODES\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col sm=\"6\">\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<PeersHealth peerStatus={peerStatus} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<TimelineStream\n\t\t\t\t\t\t\t\t\tnotifications={notifications}\n\t\t\t\t\t\t\t\t\tblockList={blockActivity}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col sm=\"6\">\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<ChartStats />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card className={`${classes.section} ${classes.center}`}>\n\t\t\t\t\t\t\t\t<h5>Transactions by Organization</h5>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<OrgPieChart transactionByOrg={transactionByOrg} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDashboardView.propTypes = {\n\tblockList: blockListType.isRequired,\n\tdashStats: dashStatsType.isRequired,\n\tpeerStatus: peerStatusType.isRequired,\n\ttransactionByOrg: transactionByOrgType.isRequired\n};\n\nexport default withStyles(styles)(DashboardView);\n"]},"metadata":{},"sourceType":"module"}